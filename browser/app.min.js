(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.SpellcastClient=e()}})(function(){var e,t,n;return function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var f=typeof require=="function"&&require;if(!a&&f)return f(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";var i=e("nextgen-events");var r=e("dom-kit");var s=e("url");function o(e){return o.create(e)}t.exports=o;o.prototype=Object.create(i.prototype);o.prototype.constructor=o;o.create=function e(t){var n=Object.create(o.prototype,{input:{value:new i,enumerable:true},token:{value:t.token||"null",writable:true,enumerable:true},ws:{value:null,writable:true,enumerable:true}});["ready","next","textInput","exit"].forEach(function(e){n.input.on(e,o.forward.bind(n,e))});return n};o.autoCreate=function t(){var n=s.parse(window.location.href,true).query;window.spellcastClient=o.create(n);var i={classic:e("./ui/classic.js")};if(!n.ui){n.ui=["classic"]}else if(!Array.isArray(n.ui)){n.ui=[n.ui]}n.ui.forEach(function(e){if(i[e]){i[e](window.spellcastClient)}});return window.spellcastClient};o.prototype.run=function e(t){var n=this;this.ws=new WebSocket("ws://127.0.0.1:57311/"+this.token);this.ws.onopen=function e(){n.input.emit("ready");console.log("Websocket opened!");t()};this.ws.onclose=function e(){console.log("Websocket closed!")}};o.forward=function e(t){var n=this;var i=Array.prototype.slice.call(arguments,1);var r=JSON.stringify({event:t,args:i});Object.keys(this.ws).forEach(function(e){n.ws[e].send(r)})};o.autoCreate();r.ready(function(){window.spellcastClient.run()})},{"./ui/classic.js":2,"dom-kit":11,"nextgen-events":13,url:9}],2:[function(e,t,n){(function(n){"use strict";var i=e("dom-kit");function r(e,t){if(!t){t=Object.create(r.prototype,{client:{value:e,enumerable:true}})}t.client.on("message",{fn:r.message.bind(t),async:true});t.client.on("extOutput",r.extOutput.bind(t));t.client.on("extErrorOutput",r.extErrorOutput.bind(t));t.client.on("enterScene",r.enterScene.bind(t));t.client.on("next",r.next.bind(t));t.client.on("textInput",r.textInput.bind(t));t.client.on("exit",r.exit.bind(t));return t}t.exports=r;r.message=function e(t,n){var i=this,r=false;if(!n){n={}}var s=function e(){if(r){return}r=true;callback()};term(t+"\n");s()};r.enterScene=function e(){};r.next=function e(t){term("\n");if(t.length===1){this.nextConfirm(t[0])}else{this.nextMenu(t)}};r.prototype.nextConfirm=function e(t){var n=this;if(t.label){term.brightBlue("Next: %s\n\n",t.label)}else{term.brightBlue("Next.\n\n")}term.inverse("PRESS ANY KEY TO CONTINUE");var i=function e(t){if(t.length===1||t==="ENTER"){term.column(1).eraseLine("\n");term.off("key",e);n.client.input.emit("next",0)}};term.on("key",i)};r.prototype.nextMenu=function e(t){var n=this,i,r=97+t.length-1;t.forEach(function(e,n){term.brightBlue("%s. %s\n",String.fromCharCode(97+n),t[n].label)});term("\n");term.inverse("PRESS KEY a-"+String.fromCharCode(r));var s=function e(t,s,o){if(o.codepoint>=97&&o.codepoint<=r){term.column(1).eraseLine("\n");i=o.codepoint-97;term.off("key",e);n.client.input.emit("next",i)}};term.on("key",s)};r.extOutput=function e(t){n.stdout.write(t)};r.extErrorOutput=function e(t){n.stderr.write(t)};r.textInput=function e(t){var n=this;if(t){term(t)}var i={};term.inputField(i,function(e,t){term("\n");if(e){n.client.input.emit(e)}else{n.client.input.emit("textInput",t)}})};r.exit=function e(){term.styleReset()}}).call(this,e("_process"))},{_process:4,"dom-kit":11}],3:[function(e,t,n){},{}],4:[function(e,t,n){var i=t.exports={};var r;var s;(function(){try{r=setTimeout}catch(e){r=function(){throw new Error("setTimeout is not defined")}}try{s=clearTimeout}catch(e){s=function(){throw new Error("clearTimeout is not defined")}}})();var o=[];var a=false;var f;var h=-1;function u(){if(!a||!f){return}a=false;if(f.length){o=f.concat(o)}else{h=-1}if(o.length){l()}}function l(){if(a){return}var e=r(u);a=true;var t=o.length;while(t){f=o;o=[];while(++h<t){if(f){f[h].run()}}h=-1;t=o.length}f=null;a=false;s(e)}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}o.push(new c(e,t));if(o.length===1&&!a){r(l,0)}};function c(e,t){this.fun=e;this.array=t}c.prototype.run=function(){this.fun.apply(null,this.array)};i.title="browser";i.browser=true;i.env={};i.argv=[];i.version="";i.versions={};function p(){}i.on=p;i.addListener=p;i.once=p;i.off=p;i.removeListener=p;i.removeAllListeners=p;i.emit=p;i.binding=function(e){throw new Error("process.binding is not supported")};i.cwd=function(){return"/"};i.chdir=function(e){throw new Error("process.chdir is not supported")};i.umask=function(){return 0}},{}],5:[function(t,n,i){(function(t){(function(r){var s=typeof i=="object"&&i&&!i.nodeType&&i;var o=typeof n=="object"&&n&&!n.nodeType&&n;var a=typeof t=="object"&&t;if(a.global===a||a.window===a||a.self===a){r=a}var f,h=2147483647,u=36,l=1,c=26,p=38,v=700,d=72,m=128,g="-",y=/^xn--/,_=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=u-l,C=Math.floor,E=String.fromCharCode,L;function O(e){throw new RangeError(x[e])}function j(e,t){var n=e.length;var i=[];while(n--){i[n]=t(e[n])}return i}function A(e,t){var n=e.split("@");var i="";if(n.length>1){i=n[0]+"@";e=n[1]}e=e.replace(b,".");var r=e.split(".");var s=j(r,t).join(".");return i+s}function T(e){var t=[],n=0,i=e.length,r,s;while(n<i){r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){s=e.charCodeAt(n++);if((s&64512)==56320){t.push(((r&1023)<<10)+(s&1023)+65536)}else{t.push(r);n--}}else{t.push(r)}}return t}function N(e){return j(e,function(e){var t="";if(e>65535){e-=65536;t+=E(e>>>10&1023|55296);e=56320|e&1023}t+=E(e);return t}).join("")}function k(e){if(e-48<10){return e-22}if(e-65<26){return e-65}if(e-97<26){return e-97}return u}function S(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function q(e,t,n){var i=0;e=n?C(e/v):e>>1;e+=C(e/t);for(;e>w*c>>1;i+=u){e=C(e/w)}return C(i+(w+1)*e/(e+p))}function I(e){var t=[],n=e.length,i,r=0,s=m,o=d,a,f,p,v,y,_,b,x,w;a=e.lastIndexOf(g);if(a<0){a=0}for(f=0;f<a;++f){if(e.charCodeAt(f)>=128){O("not-basic")}t.push(e.charCodeAt(f))}for(p=a>0?a+1:0;p<n;){for(v=r,y=1,_=u;;_+=u){if(p>=n){O("invalid-input")}b=k(e.charCodeAt(p++));if(b>=u||b>C((h-r)/y)){O("overflow")}r+=b*y;x=_<=o?l:_>=o+c?c:_-o;if(b<x){break}w=u-x;if(y>C(h/w)){O("overflow")}y*=w}i=t.length+1;o=q(r-v,i,v==0);if(C(r/i)>h-s){O("overflow")}s+=C(r/i);r%=i;t.splice(r++,0,s)}return N(t)}function U(e){var t,n,i,r,s,o,a,f,p,v,y,_=[],b,x,w,L;e=T(e);b=e.length;t=m;n=0;s=d;for(o=0;o<b;++o){y=e[o];if(y<128){_.push(E(y))}}i=r=_.length;if(r){_.push(g)}while(i<b){for(a=h,o=0;o<b;++o){y=e[o];if(y>=t&&y<a){a=y}}x=i+1;if(a-t>C((h-n)/x)){O("overflow")}n+=(a-t)*x;t=a;for(o=0;o<b;++o){y=e[o];if(y<t&&++n>h){O("overflow")}if(y==t){for(f=n,p=u;;p+=u){v=p<=s?l:p>=s+c?c:p-s;if(f<v){break}L=f-v;w=u-v;_.push(E(S(v+L%w,0)));f=C(L/w)}_.push(E(S(f,0)));s=q(n,x,i==r);n=0;++i}}++n;++t}return _.join("")}function D(e){return A(e,function(e){return y.test(e)?I(e.slice(4).toLowerCase()):e})}function M(e){return A(e,function(e){return _.test(e)?"xn--"+U(e):e})}f={version:"1.4.1",ucs2:{decode:T,encode:N},decode:I,encode:U,toASCII:M,toUnicode:D};if(typeof e=="function"&&typeof e.amd=="object"&&e.amd){e("punycode",function(){return f})}else if(s&&o){if(n.exports==s){o.exports=f}else{for(L in f){f.hasOwnProperty(L)&&(s[L]=f[L])}}}else{r.punycode=f}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],6:[function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,s){t=t||"&";n=n||"=";var o={};if(typeof e!=="string"||e.length===0){return o}var a=/\+/g;e=e.split(t);var f=1e3;if(s&&typeof s.maxKeys==="number"){f=s.maxKeys}var h=e.length;if(f>0&&h>f){h=f}for(var u=0;u<h;++u){var l=e[u].replace(a,"%20"),c=l.indexOf(n),p,v,d,m;if(c>=0){p=l.substr(0,c);v=l.substr(c+1)}else{p=l;v=""}d=decodeURIComponent(p);m=decodeURIComponent(v);if(!i(o,d)){o[d]=m}else if(r(o[d])){o[d].push(m)}else{o[d]=[o[d],m]}}return o};var r=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},{}],7:[function(e,t,n){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,a){t=t||"&";n=n||"=";if(e===null){e=undefined}if(typeof e==="object"){return s(o(e),function(o){var a=encodeURIComponent(i(o))+n;if(r(e[o])){return s(e[o],function(e){return a+encodeURIComponent(i(e))}).join(t)}else{return a+encodeURIComponent(i(e[o]))}}).join(t)}if(!a)return"";return encodeURIComponent(i(a))+n+encodeURIComponent(i(e))};var r=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function s(e,t){if(e.map)return e.map(t);var n=[];for(var i=0;i<e.length;i++){n.push(t(e[i],i))}return n}var o=Object.keys||function(e){var t=[];for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))t.push(n)}return t}},{}],8:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode");n.encode=n.stringify=e("./encode")},{"./decode":6,"./encode":7}],9:[function(e,t,n){"use strict";var i=e("punycode");var r=e("./util");n.parse=x;n.resolve=C;n.resolveObject=E;n.format=w;n.Url=s;function s(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],u=["{","}","|","\\","^","`"].concat(h),l=["'"].concat(u),c=["%","/","?",";","#"].concat(l),p=["/","?","#"],v=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:true,"javascript:":true},y={javascript:true,"javascript:":true},_={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},b=e("querystring");function x(e,t,n){if(e&&r.isObject(e)&&e instanceof s)return e;var i=new s;i.parse(e,t,n);return i}s.prototype.parse=function(e,t,n){if(!r.isString(e)){throw new TypeError("Parameter 'url' must be a string, not "+typeof e)}var s=e.indexOf("?"),a=s!==-1&&s<e.indexOf("#")?"?":"#",h=e.split(a),u=/\\/g;h[0]=h[0].replace(u,"/");e=h.join(a);var x=e;x=x.trim();if(!n&&e.split("#").length===1){var w=f.exec(x);if(w){this.path=x;this.href=x;this.pathname=w[1];if(w[2]){this.search=w[2];if(t){this.query=b.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(t){this.search="";this.query={}}return this}}var C=o.exec(x);if(C){C=C[0];var E=C.toLowerCase();this.protocol=E;x=x.substr(C.length)}if(n||C||x.match(/^\/\/[^@\/]+@[^@\/]+/)){var L=x.substr(0,2)==="//";if(L&&!(C&&y[C])){x=x.substr(2);this.slashes=true}}if(!y[C]&&(L||C&&!_[C])){var O=-1;for(var j=0;j<p.length;j++){var A=x.indexOf(p[j]);if(A!==-1&&(O===-1||A<O))O=A}var T,N;if(O===-1){N=x.lastIndexOf("@")}else{N=x.lastIndexOf("@",O)}if(N!==-1){T=x.slice(0,N);x=x.slice(N+1);this.auth=decodeURIComponent(T)}O=-1;for(var j=0;j<c.length;j++){var A=x.indexOf(c[j]);if(A!==-1&&(O===-1||A<O))O=A}if(O===-1)O=x.length;this.host=x.slice(0,O);x=x.slice(O);this.parseHost();this.hostname=this.hostname||"";var k=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!k){var S=this.hostname.split(/\./);for(var j=0,q=S.length;j<q;j++){var I=S[j];if(!I)continue;if(!I.match(d)){var U="";for(var D=0,M=I.length;D<M;D++){if(I.charCodeAt(D)>127){U+="x"}else{U+=I[D]}}if(!U.match(d)){var R=S.slice(0,j);var X=S.slice(j+1);var P=I.match(m);if(P){R.push(P[1]);X.unshift(P[2])}if(X.length){x="/"+X.join(".")+x}this.hostname=R.join(".");break}}}}if(this.hostname.length>v){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!k){this.hostname=i.toASCII(this.hostname)}var B=this.port?":"+this.port:"";var F=this.hostname||"";this.host=F+B;this.href+=this.host;if(k){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(x[0]!=="/"){x="/"+x}}}if(!g[E]){for(var j=0,q=l.length;j<q;j++){var W=l[j];if(x.indexOf(W)===-1)continue;var Y=encodeURIComponent(W);if(Y===W){Y=escape(W)}x=x.split(W).join(Y)}}var H=x.indexOf("#");if(H!==-1){this.hash=x.substr(H);x=x.slice(0,H)}var Q=x.indexOf("?");if(Q!==-1){this.search=x.substr(Q);this.query=x.substr(Q+1);if(t){this.query=b.parse(this.query)}x=x.slice(0,Q)}else if(t){this.search="";this.query={}}if(x)this.pathname=x;if(_[E]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var B=this.pathname||"";var z=this.search||"";this.path=B+z}this.href=this.format();return this};function w(e){if(r.isString(e))e=x(e);if(!(e instanceof s))return s.prototype.format.call(e);return e.format()}s.prototype.format=function(){var e=this.auth||"";if(e){e=encodeURIComponent(e);e=e.replace(/%3A/i,":");e+="@"}var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",s=false,o="";if(this.host){s=e+this.host}else if(this.hostname){s=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){s+=":"+this.port}}if(this.query&&r.isObject(this.query)&&Object.keys(this.query).length){o=b.stringify(this.query)}var a=this.search||o&&"?"+o||"";if(t&&t.substr(-1)!==":")t+=":";if(this.slashes||(!t||_[t])&&s!==false){s="//"+(s||"");if(n&&n.charAt(0)!=="/")n="/"+n}else if(!s){s=""}if(i&&i.charAt(0)!=="#")i="#"+i;if(a&&a.charAt(0)!=="?")a="?"+a;n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)});a=a.replace("#","%23");return t+s+n+a+i};function C(e,t){return x(e,false,true).resolve(t)}s.prototype.resolve=function(e){return this.resolveObject(x(e,false,true)).format()};function E(e,t){if(!e)return t;return x(e,false,true).resolveObject(t)}s.prototype.resolveObject=function(e){if(r.isString(e)){var t=new s;t.parse(e,false,true);e=t}var n=new s;var i=Object.keys(this);for(var o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}n.hash=e.hash;if(e.href===""){n.href=n.format();return n}if(e.slashes&&!e.protocol){var f=Object.keys(e);for(var h=0;h<f.length;h++){var u=f[h];if(u!=="protocol")n[u]=e[u]}if(_[n.protocol]&&n.hostname&&!n.pathname){n.path=n.pathname="/"}n.href=n.format();return n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){var l=Object.keys(e);for(var c=0;c<l.length;c++){var p=l[c];n[p]=e[p]}n.href=n.format();return n}n.protocol=e.protocol;if(!e.host&&!y[e.protocol]){var v=(e.pathname||"").split("/");while(v.length&&!(e.host=v.shift()));if(!e.host)e.host="";if(!e.hostname)e.hostname="";if(v[0]!=="")v.unshift("");if(v.length<2)v.unshift("");n.pathname=v.join("/")}else{n.pathname=e.pathname}n.search=e.search;n.query=e.query;n.host=e.host||"";n.auth=e.auth;n.hostname=e.hostname||e.host;n.port=e.port;if(n.pathname||n.search){var d=n.pathname||"";var m=n.search||"";n.path=d+m}n.slashes=n.slashes||e.slashes;n.href=n.format();return n}var g=n.pathname&&n.pathname.charAt(0)==="/",b=e.host||e.pathname&&e.pathname.charAt(0)==="/",x=b||g||n.host&&e.pathname,w=x,C=n.pathname&&n.pathname.split("/")||[],v=e.pathname&&e.pathname.split("/")||[],E=n.protocol&&!_[n.protocol];if(E){n.hostname="";n.port=null;if(n.host){if(C[0]==="")C[0]=n.host;else C.unshift(n.host)}n.host="";if(e.protocol){e.hostname=null;e.port=null;if(e.host){if(v[0]==="")v[0]=e.host;else v.unshift(e.host)}e.host=null}x=x&&(v[0]===""||C[0]==="")}if(b){n.host=e.host||e.host===""?e.host:n.host;n.hostname=e.hostname||e.hostname===""?e.hostname:n.hostname;n.search=e.search;n.query=e.query;C=v}else if(v.length){if(!C)C=[];C.pop();C=C.concat(v);n.search=e.search;n.query=e.query}else if(!r.isNullOrUndefined(e.search)){if(E){n.hostname=n.host=C.shift();var L=n.host&&n.host.indexOf("@")>0?n.host.split("@"):false;if(L){n.auth=L.shift();n.host=n.hostname=L.shift()}}n.search=e.search;n.query=e.query;if(!r.isNull(n.pathname)||!r.isNull(n.search)){n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")}n.href=n.format();return n}if(!C.length){n.pathname=null;if(n.search){n.path="/"+n.search}else{n.path=null}n.href=n.format();return n}var O=C.slice(-1)[0];var j=(n.host||e.host||C.length>1)&&(O==="."||O==="..")||O==="";var A=0;for(var T=C.length;T>=0;T--){O=C[T];if(O==="."){C.splice(T,1)}else if(O===".."){C.splice(T,1);A++}else if(A){C.splice(T,1);A--}}if(!x&&!w){for(;A--;A){C.unshift("..")}}if(x&&C[0]!==""&&(!C[0]||C[0].charAt(0)!=="/")){C.unshift("")}if(j&&C.join("/").substr(-1)!=="/"){C.push("")}var N=C[0]===""||C[0]&&C[0].charAt(0)==="/";if(E){n.hostname=n.host=N?"":C.length?C.shift():"";var L=n.host&&n.host.indexOf("@")>0?n.host.split("@"):false;if(L){n.auth=L.shift();n.host=n.hostname=L.shift()}}x=x||n.host&&C.length;if(x&&!N){C.unshift("")}if(!C.length){n.pathname=null;n.path=null}else{n.pathname=C.join("/")}if(!r.isNull(n.pathname)||!r.isNull(n.search)){n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")}n.auth=e.auth||n.auth;n.slashes=n.slashes||e.slashes;n.href=n.format();return n};s.prototype.parseHost=function(){var e=this.host;var t=a.exec(e);if(t){t=t[0];if(t!==":"){this.port=t.substr(1)}e=e.substr(0,e.length-t.length)}if(e)this.hostname=e}},{"./util":10,punycode:5,querystring:8}],10:[function(e,t,n){"use strict";t.exports={isString:function(e){return typeof e==="string"},isObject:function(e){return typeof e==="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}}},{}],11:[function(e,t,n){var i={};t.exports=i;i.svg=e("./svg.js");i.ready=function e(t){document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,false);t()},false)};i.fromHtml=function e(t){var n,i,r;r=document.createDocumentFragment();i=document.createElement("div");i.insertAdjacentHTML("beforeend",t);for(n=0;n<i.children.length;n++){r.appendChild(i.children[n])}return r};i.batch=function e(t,n){var i,r=Array.prototype.slice.call(arguments,1);if(n instanceof Element){r[0]=n;t.apply(this,r)}else if(Array.isArray(n)){for(i=0;i<n.length;i++){r[0]=n[i];t.apply(this,r)}}else if(n instanceof NodeList||n instanceof NamedNodeMap){for(i=0;i<n.length;i++){r[0]=n[i];t.apply(this,r)}}};i.css=function e(t,n){var i;for(i in n){t.style[i]=n[i]}};i.attr=function e(t,n){var i;for(i in n){if(n[i]===null){t.removeAttribute(i)}else{t.setAttribute(i,n[i])}}};i.remove=function e(t){t.parentNode.removeChild(t)};i.empty=function e(t){while(t.firstChild){t.removeChild(t.firstChild)}};i.cloneInto=function e(t,n){i.empty(t);t.appendChild(n.cloneNode(true))};i.insertInto=function e(t,n){i.empty(t);t.appendChild(n)};i.idNamespace=function e(t,n){var r,s={};r=t.querySelectorAll("*");i.batch(i.idNamespace.idAttributePass,r,n,s);i.batch(i.idNamespace.otherAttributesPass,r,s)};i.idNamespace.idAttributePass=function e(t,n,i){i[t.id]=n+"."+t.id;t.id=i[t.id]};i.idNamespace.otherAttributesPass=function e(t,n){i.batch(i.idNamespace.oneAttributeSubPass,t.attributes,n)};i.idNamespace.oneAttributeSubPass=function e(t,n){t.value=t.value.replace(/url\(#([^)]+)\)/g,function(e,t){if(!n[t]){return e}return"url(#"+n[t]+")"})};i.id=function e(t,e){t.id=e};i.text=function e(t,e){t.textContent=e};i.html=function e(t,e){t.innerHTML=e}},{"./svg.js":12}],12:[function(e,t,n){var i=e("fs");var r=e("./dom.js");var s={};t.exports=s;s.load=function e(t,n,r,o){if(typeof r==="function"){o=r}if(!r||typeof r!=="object"){r={}}if(n.substring(0,7)==="file://"){i.readFile(n.slice(7),function(e,n){if(e){o(e);return}var i=new DOMParser;var a=i.parseFromString(n.toString(),"application/xml").documentElement;try{s.attachXmlTo(t,a,r)}catch(e){o(e);return}o(undefined,a)})}else{s.ajax(n,function(e,n){var i=n.documentElement;if(e){o(e);return}try{s.attachXmlTo(t,i,r)}catch(e){o(e);return}o(undefined,i)})}};s.attachXmlTo=function e(t,n,i){s.lightCleanup(n);if(i.id!==undefined){if(typeof i.id==="string"){n.setAttribute("id",i.id)}else if(!i.id){n.removeAttribute("id")}}if(typeof i.class==="string"){n.setAttribute("class",i.class)}if(i.idNamespace){r.idNamespace(n,i.idNamespace)}if(i.hidden){n.style.visibility="hidden"}t.appendChild(n)};s.lightCleanup=function e(t){o(t,"metadata");o(t,"script")};function o(e,t){var n,i,r;i=e.getElementsByTagName(t);for(n=0;n<i.length;n++){r=i.item(n);r.parentNode.removeChild(r)}}s.ajax=function e(t,n){var i=new XMLHttpRequest;i.responseType="document";i.onreadystatechange=s.ajax.ajaxStatus.bind(i,n);i.open("GET",t);i.send()};s.ajax.ajaxStatus=function e(t){try{if(this.readyState===4){if(this.status===200){t(undefined,this.responseXML)}else if(this.status===0&&this.responseXML){t(undefined,this.responseXML)}else{if(this.status){t(this.status)}else{t(new Error("[dom-kit.svg] ajaxStatus(): Error with falsy status"))}}}}catch(e){t(e)}}},{"./dom.js":11,fs:3}],13:[function(e,t,n){"use strict";function i(){return Object.create(i.prototype)}t.exports=i;i.SYNC=-Infinity;i.init=function e(){Object.defineProperty(this,"__ngev",{value:{nice:i.SYNC,interruptible:false,recursion:0,contexts:{},events:{error:[],interrupt:[],newListener:[],removeListener:[]}}})};i.filterOutCallback=function(e,t){return e!==t};i.prototype.addListener=function e(t,n,r){var s={};if(!this.__ngev){i.init.call(this)}if(!this.__ngev.events[t]){this.__ngev.events[t]=[]}if(!t||typeof t!=="string"){throw new TypeError(".addListener(): argument #0 should be a non-empty string")}if(typeof n!=="function"){r=n;n=undefined}if(!r||typeof r!=="object"){r={}}s.fn=n||r.fn;s.id=typeof r.id==="string"?r.id:s.fn;s.once=!!r.once;s.async=!!r.async;s.nice=r.nice!==undefined?Math.floor(r.nice):i.SYNC;s.context=typeof r.context==="string"?r.context:null;if(typeof s.fn!=="function"){throw new TypeError(".addListener(): a function or an object with a 'fn' property which value is a function should be provided")}if(s.context&&typeof s.context==="string"&&!this.__ngev.contexts[s.context]){this.addListenerContext(s.context)}s.event=t;if(this.__ngev.events.newListener.length){this.emit("newListener",[s])}this.__ngev.events[t].push(s);return this};i.prototype.on=i.prototype.addListener;i.prototype.once=function e(t,n,i){if(n&&typeof n==="object"){n.once=true}else if(i&&typeof i==="object"){i.once=true}else{i={once:true}}return this.addListener(t,n,i)};i.prototype.removeListener=function e(t,n){var r,s,o=[],a=[];if(!t||typeof t!=="string"){throw new TypeError(".removeListener(): argument #0 should be a non-empty string")}if(!this.__ngev){i.init.call(this)}if(!this.__ngev.events[t]){this.__ngev.events[t]=[]}s=this.__ngev.events[t].length;for(r=0;r<s;r++){if(this.__ngev.events[t][r].id===n){a.push(this.__ngev.events[t][r])}else{o.push(this.__ngev.events[t][r])}}this.__ngev.events[t]=o;if(a.length&&this.__ngev.events.removeListener.length){this.emit("removeListener",a)}return this};i.prototype.off=i.prototype.removeListener;i.prototype.removeAllListeners=function e(t){var n;if(!this.__ngev){i.init.call(this)}if(t){if(!t||typeof t!=="string"){throw new TypeError(".removeAllListener(): argument #0 should be undefined or a non-empty string")}if(!this.__ngev.events[t]){this.__ngev.events[t]=[]}n=this.__ngev.events[t];this.__ngev.events[t]=[];if(n.length&&this.__ngev.events.removeListener.length){this.emit("removeListener",n)}}else{this.__ngev.events={}}return this};i.listenerWrapper=function e(t,n,r){var s,o;if(n.interrupt){return}if(t.async){if(r){o=r.serial;r.ready=!o}s=t.fn.apply(undefined,n.args.concat(function(e){n.listenersDone++;if(e&&n.emitter.__ngev.interruptible&&!n.interrupt&&n.name!=="interrupt"){n.interrupt=e;if(n.callback){n.callback(n.interrupt,n);delete n.callback}n.emitter.emit("interrupt",n.interrupt)}else if(n.listenersDone>=n.listeners&&n.callback){n.callback(undefined,n);delete n.callback}if(o){i.processQueue.call(n.emitter,t.context,true)}}))}else{s=t.fn.apply(undefined,n.args);n.listenersDone++}if(s&&n.emitter.__ngev.interruptible&&!n.interrupt&&n.name!=="interrupt"){n.interrupt=s;if(n.callback){n.callback(n.interrupt,n);delete n.callback}n.emitter.emit("interrupt",n.interrupt)}else if(n.listenersDone>=n.listeners&&n.callback){n.callback(undefined,n);delete n.callback}};var r=0;i.prototype.emit=function e(){var t,n,s=0,o,a,f,h,u,l=[];o={emitter:this,id:r++,name:null,args:null,nice:null,interrupt:null,listeners:null,listenersDone:0,callback:null};if(!this.__ngev){i.init.call(this)}if(typeof arguments[0]==="number"){o.nice=Math.floor(arguments[0]);o.name=arguments[1];if(!o.name||typeof o.name!=="string"){throw new TypeError(".emit(): when argument #0 is a number, argument #1 should be a non-empty string")}if(typeof arguments[arguments.length-1]==="function"){o.callback=arguments[arguments.length-1];o.args=Array.prototype.slice.call(arguments,2,-1)}else{o.args=Array.prototype.slice.call(arguments,2)}}else{o.nice=this.__ngev.nice;o.name=arguments[0];if(!o.name||typeof o.name!=="string"){throw new TypeError(".emit(): argument #0 should be an number or a non-empty string")}o.args=Array.prototype.slice.call(arguments,1);if(typeof arguments[arguments.length-1]==="function"){o.callback=arguments[arguments.length-1];o.args=Array.prototype.slice.call(arguments,1,-1)}else{o.args=Array.prototype.slice.call(arguments,1)}}if(!this.__ngev.events[o.name]){this.__ngev.events[o.name]=[]}o.listeners=this.__ngev.events[o.name].length;this.__ngev.recursion++;u=this.__ngev.events[o.name].slice();for(t=0,n=u.length;t<n;t++){s++;a=u[t];f=a.context&&this.__ngev.contexts[a.context];if(f&&f.status===i.CONTEXT_DISABLED){continue}if(f){h=Math.max(o.nice,a.nice,f.nice)}else{h=Math.max(o.nice,a.nice)}if(a.once){this.__ngev.events[o.name]=this.__ngev.events[o.name].filter(i.filterOutCallback.bind(undefined,a));l.push(a)}if(f&&(f.status===i.CONTEXT_QUEUED||!f.ready)){f.queue.push({event:o,listener:a,nice:h})}else{try{if(h<0){if(this.__ngev.recursion>=-h){setImmediate(i.listenerWrapper.bind(this,a,o,f))}else{i.listenerWrapper.call(this,a,o,f)}}else{setTimeout(i.listenerWrapper.bind(this,a,o,f),h)}}catch(e){this.__ngev.recursion--;throw e}}}this.__ngev.recursion--;if(l.length&&this.__ngev.events.removeListener.length){this.emit("removeListener",l)}if(!s){if(o.name==="error"){if(arguments[1]){throw arguments[1]}else{throw Error("Uncaught, unspecified 'error' event.")}}if(o.callback){o.callback(undefined,o);delete o.callback}}return o};i.prototype.listeners=function e(t){if(!t||typeof t!=="string"){throw new TypeError(".listeners(): argument #0 should be a non-empty string")}if(!this.__ngev){i.init.call(this)}if(!this.__ngev.events[t]){this.__ngev.events[t]=[]}return this.__ngev.events[t].slice()};i.listenerCount=function(e,t){if(!e||!(e instanceof i)){throw new TypeError(".listenerCount(): argument #0 should be an instance of NextGenEvents")}return e.listenerCount(t)};i.prototype.listenerCount=function(e){if(!e||typeof e!=="string"){throw new TypeError(".listenerCount(): argument #1 should be a non-empty string")}if(!this.__ngev){i.init.call(this)}if(!this.__ngev.events[e]){this.__ngev.events[e]=[]}return this.__ngev.events[e].length};i.prototype.setNice=function e(t){if(!this.__ngev){i.init.call(this)}this.__ngev.nice=Math.floor(+t||0)};i.prototype.setInterruptible=function e(t){if(!this.__ngev){i.init.call(this)}this.__ngev.interruptible=!!t};i.prototype.setMaxListeners=function(){};i.noop=function(){};i.CONTEXT_ENABLED=0;i.CONTEXT_DISABLED=1;i.CONTEXT_QUEUED=2;i.prototype.addListenerContext=function e(t,n){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".addListenerContext(): argument #0 should be a non-empty string")}if(!n||typeof n!=="object"){n={}}if(!this.__ngev.contexts[t]){this.__ngev.contexts[t]=Object.create(i.prototype);this.__ngev.contexts[t].nice=i.SYNC;this.__ngev.contexts[t].ready=true;this.__ngev.contexts[t].status=i.CONTEXT_ENABLED;this.__ngev.contexts[t].serial=false;this.__ngev.contexts[t].queue=[]}if(n.nice!==undefined){this.__ngev.contexts[t].nice=Math.floor(n.nice)}if(n.status!==undefined){this.__ngev.contexts[t].status=n.status}if(n.serial!==undefined){this.__ngev.contexts[t].serial=!!n.serial}return this};i.prototype.disableListenerContext=function e(t){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".disableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=i.CONTEXT_DISABLED;return this};i.prototype.enableListenerContext=function e(t){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".enableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=i.CONTEXT_ENABLED;if(this.__ngev.contexts[t].queue.length>0){i.processQueue.call(this,t)}return this};i.prototype.queueListenerContext=function e(t){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".queueListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=i.CONTEXT_QUEUED;return this};i.prototype.serializeListenerContext=function e(t,n){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".serializeListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].serial=n===undefined?true:!!n;return this};i.prototype.setListenerContextNice=function e(t,n){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".setListenerContextNice(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].nice=Math.floor(n);return this};i.prototype.destroyListenerContext=function e(t){var n,r,s,o,a=[];if(!t||typeof t!=="string"){throw new TypeError(".disableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev){i.init.call(this)}for(s in this.__ngev.events){o=null;r=this.__ngev.events[s].length;for(n=0;n<r;n++){if(this.__ngev.events[s][n].context===t){o=[];a.push(this.__ngev.events[s][n])}else if(o){o.push(this.__ngev.events[s][n])}}if(o){this.__ngev.events[s]=o}}if(this.__ngev.contexts[t]){delete this.__ngev.contexts[t]}if(a.length&&this.__ngev.events.removeListener.length){this.emit("removeListener",a)}return this};i.processQueue=function e(t,n){var r,s;if(!this.__ngev.contexts[t]){return}r=this.__ngev.contexts[t];if(n){r.ready=true}this.__ngev.recursion++;while(r.ready&&r.queue.length){s=r.queue.shift();if(s.event.interrupt){continue}try{if(s.nice<0){if(this.__ngev.recursion>=-s.nice){setImmediate(i.listenerWrapper.bind(this,s.listener,s.event,r))}else{i.listenerWrapper.call(this,s.listener,s.event,r)}}else{setTimeout(i.listenerWrapper.bind(this,s.listener,s.event,r),s.nice)}}catch(e){this.__ngev.recursion--;throw e}}this.__ngev.recursion--};i.on=i.prototype.on;i.once=i.prototype.once;i.off=i.prototype.off},{}]},{},[1])(1)});