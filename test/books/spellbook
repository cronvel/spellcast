
[[doctype spellcaster]]

[spell fail-dependency]
	[cast]
		- fail-scroll
	[scroll]
		- echo "after fail dependency"

[spell fail-scroll]
	[scroll]
		- exit 1
		- echo "after fail"

[spell depend]
	[cast]
		- blah
	[summon]
		- spellcast-dependency.txt
	[scroll]
		- echo Dependencies should be rebuilt



# Reverse summonings are tested after all summonings have been tried.
# The label of the [reverse-summoning] tag is used to summon everything.
[reverse-summoning md2html]
	
	# Need globs, check all files matching the glob, target * use string matching the source *
	# If there are less * on the target, source * are used FROM THE LAST TO THE FIRST
	[mapping]
		../../*.md: build/*.html
		../../doc/*.md: build/doc-*.html
	
	[summon]
		- $> ${this.source}
	
	[chant]
		# fake command
		- $> md2html -o ${this.summoning} ${this.source}



